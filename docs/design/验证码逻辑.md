### 图形验证码注册登陆逻辑


1. 注册时必须带上验证码
2. 登陆时，在redis中记录一个账号的登陆失败次数，超过3次就需要带上验证码
3. 需要用到验证码时，前端发起请求，后端返回id和验证码路径,并将<id, 验证码值>存入redis，缓存时间为1分钟
4. 前端把上述路径放到域名后面作为验证码图片的src，再把id的值隐藏在表单中
5. 表单提交后，取出<id, 验证码值>，后端通过id从redis取出验证码值，如果和用户输入的验证码匹配，则验证成功，此时redis中缓存立即失效，否则返回失败
6. 使用golang自带的通道设置一个定时器，定时清空img下的缓存图片，减少io次数。



**安全问题：**

1. 表单必须开启csrf



### 邮箱验证码注册和找回密码逻辑

1. 需要用到验证码时，前端发起请求，后端根据请求时间返回一个uuid,并将<uuid, 验证码值>存入redis，缓存时间为5分钟

2. 前端把上述uuid值隐藏在表单中
3. 表单提交后，取出<uuid, 验证码值>，后端通过uuid从redis中取出验证码值进行对比，如果和用户输入的验证码匹配，则验证成功，此时redis中缓存立即失效，否则返回失败。

